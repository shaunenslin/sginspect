<div ng-controller="ListOpenCtrl">  
    <div class="inset" style="padding-top: 10px; padding-bottom: 50px;">
        <div ng-if="mode === 'jobs'" class="list-group inset">  
            <div style="margin-top: 10px;" class="alert alert-warning" ng-if="CompletedJobsCount > 0">
                <p><i class="fa fa-info"></i> You have {{CompletedJobsCount}} unsent invoice(s). <a href="#/sync">Click here to Sync</a></p>
            </div> 
            <div class="btn-group btn-group-justified" role="group"  style="margin-top:10px;">
                <div  class="btn-group" role="group">
                    <button ng-click="onJobClicked('open')" class="btn btn-default">
                        <h4>Open Jobs</h4>
                        <p style="visibility:hidden;">(Not Synced)</p>
                        <h1>{{openJobsCount}}</h1>
                    </button>
                </div>
                <div  class="btn-group" role="group">
                    <button ng-click="onJobClicked('completed')" class="btn btn-default">
                        <h4>Completed Jobs</h4>
                        <p>(Not Synced)</p>
                        <h1>{{CompletedJobsCount}}</h1>
                    </button>
                </div>
            </div>
             <div class="btn-group btn-group-justified" role="group">
                <div  class="btn-group" role="group">
                    <button class="btn btn-default">
                        <h4>Closed Jobs for this month</h4>
                         <p>(Synced)</p>
                        <h1>{{CloseJobsCount.result}}</h1>
                        <h3 ng-if="!CloseJobsCount">(Unavailable as you are offline)</h3>
                    </button>
                </div>
             </div>

        </div>
        <div class="list-group inset">
            <div style="margin-top: 10px;" class="alert alert-info" ng-if="mode === 'open' && InspectionForms.length >  0">
                <p><i class="fa fa-info"></i> Please enter in any of the below fields  and Click Search.</p>
            </div>
            <div ng-if="mode === 'open'"  class="well">
                <form style="margin-top:10px;" class="form-horizontal">
                    <div class="form-group">
                        <label for="job_type" class="col-sm-3">Job Type</label>
                        <div class="col-sm-9">
                            <select name="job_type" class="form-control" id="job_type" ng-model="searchText.JobType" ng-options="item.name as item.name for item in selectOptions"><option value="">-- Please select an option --</option></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="date_complete" class="col-sm-3">Date Complete</label>
                        <div class="col-sm-9"><input name="date_complete" placeholder="Search by Date"  class="form-control" id="date_complete" ng-model="searchText.Date" date-format="longDate" data-autoclose="1"  use-native="true" bs-datepicker data-date-format="yyyy-MM-dd"  type="text"></div>
                    </div>
                    <div class="form-group">
                        <label for="identifier" class="col-sm-3">Identifier</label>
                        <div class="col-sm-9"><input name="identifier" class="form-control" placeholder="Search by Registration Number/  Supplier Name / Customer Name" id="identifier" ng-model="searchText.Text" type="text"></div>
                    </div>
                    <button ng-click="onSearchClicked()" class="btn btn-success">Search <span class="fa fa-search"></span></button> <button ng-click="onClearClicked()" class="btn btn-danger">Clear</button>
                </form>  
            </div>
            <div style="padding: 19px;">
                <a ng-click="onInspectionClicked($index)" ng-repeat="row in InspectionForms" class="row list-group-item">
                    <span class=" glyphicon glyphicon-chevron-right pull-right"></span>
                    <div class="col-xs-4">
                        <div  ng-if="row.FormType === 'afterserviceevaluation'">After Service Inspection Form</div>
                        <div  ng-if="row.FormType === 'audit'">Audit Form</div>
                        <div  ng-if="row.FormType === 'customervisit'">Customer Visit Form</div>
                        <div  ng-if="row.FormType === 'supplierevaluation'">Supplier Evaluation Form</div>
                        <div  ng-if="row.FormType === 'technicalreport'">Technical Report Form</div>
                    </div>
                    <div class="col-xs-5">{{row.timeString}}</div>
                    <div ng-click="fetchOpenJobImages($index);$event.stopPropagation();" style="margin-left:10px;" class="col-xs-1"><span class=" btn btn-danger  fa fa-trash-o pull-right"></span></div>
                </a>
            </div>
            <div class="alert alert-warning" ng-if="mode === 'open' && InspectionForms.length === 0">
                <p><i class="fa fa-info"></i> No results found</p>
            </div>
            <a style="margin-top: 10px;"  ng-if="mode === 'open' && InspectionForms.length > 0" href="#job/createnew" role="button" class="btn btn-primary btn-block">Create New</a>
        </div>
        <div ng-if="mode === 'ratings'">
            <div ng-if="jobType == 'afterserviceevaluation'" style="margin-top: 10px;" class="alert alert-warning">
                <p><i class="fa fa-info"></i> Remarks For  After Service Inspection</p>
            </div>
            <div ng-if="jobType == 'audit'" style="margin-top: 10px;" class="alert alert-warning">
                <p><i class="fa fa-info"></i> Remarks For Audit</p>
            </div> 
            <div ng-if="jobType == 'technicalreport'" style="margin-top: 10px;" class="alert alert-warning">
                <p><i class="fa fa-info"></i> Remarks For Technical Report</p>
            </div> 
             <div ng-if="jobType == 'supplierevaluation'" style="margin-top: 10px;" class="alert alert-warning">
                <p><i class="fa fa-info"></i> Remarks For {{supplierStatus == 'New' ? 'New ' : 'Existing ' }} Supplier</p>
            </div> 

            <div ng-if="jobType !== 'technicalreport'" style="margin-top: 10px;" class="alert alert-info">
                <p><i class="fa fa-info"></i> Overall Rating : {{overallRating + '%'}}</p>
            </div>
            <div ng-if="additionalEquipmentRating > 0" style="margin-top: 10px;" class="alert alert-info">
                <p><i class="fa fa-info"></i> Additional Equipment Rating :  {{additionalEquipmentRating + '%'}}</p>
            </div>
             <div ng-if="jobType !== 'supplierevaluation' && jobType !== 'afterserviceevaluation'" style="margin-top: 10px;" class="alert alert-info">
                <p><i class="fa fa-info"></i> Vehicle Fitness Rating :  {{vehicleFitnessRating}}</p>
            </div>
            <div ng-if="jobType === 'supplierevaluation' && supplierStatus !== 'New'" style="margin-top: 10px;" class="alert alert-info">
                <p><i class="fa fa-info"></i> FleetAfrica Competency & Communication Rating :  {{supplierCompetencyRating + '%'}}</p>
            </div>
            <div ng-if="jobType === 'supplierevaluation' && supplierStatus !== 'New'" style="margin-top: 10px;" class="alert alert-info">
                <p><i class="fa fa-info"></i> FleetAfrica Etiquette, Lead Time & Professionalism Rating :  {{supplierEtiquetteRating + '%'}}</p>
            </div>
            <div ng-if="jobType === 'supplierevaluation' && supplierStatus !== 'New'" style="margin-top: 10px;" class="alert alert-info">
                <p><i class="fa fa-info"></i> FleetAfrica Payment & RFC Rating :  {{supplierPaymentRating + '%'}}</p>
            </div>

        </div>
        <a  ng-if="mode === 'jobs'" href="#job/createnew" role="button" class="btn btn-primary btn-block">Create New</a>
        <div style="margin-top: 10px;" class="alert alert-info" ng-if="mode === 'open' && showWarning">
            <p><i class="fa fa-info"></i> There are currently no Open Jobs</p>
        </div>
    </div>
</div>